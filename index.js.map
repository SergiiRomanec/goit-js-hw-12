{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst API_KEY = '48878991-2a0545ca0b16ae8c479dd39cc';\nconst BASE_URL = 'https://pixabay.com/api/';\n\nexport async function fetchImages(query, page = 1) {\n  try {\n    const response = await axios.get(BASE_URL, {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: true,\n        per_page: 40,\n        page: page,\n      },\n    });\n\n    return response.data;\n  } catch (error) {\n    console.error('Error fetching images:', error);\n    return { hits: [], totalHits: 0 };\n  }\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nlet lightbox;\n\nexport function renderGallery(images, append = false) {\n  const gallery = document.querySelector('.gallery');\n\n  const markup = images\n    .map(\n      image => `\n        <div class=\"gallery-item\">\n            <a href=\"${image.largeImageURL}\" class=\"gallery-link\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" class=\"gallery-image\" />\n            </a>\n        </div>\n    `\n    )\n    .join('');\n\n  if (append) {\n    gallery.insertAdjacentHTML('beforeend', markup);\n  } else {\n    gallery.innerHTML = markup;\n  }\n\n  if (!lightbox) {\n    lightbox = new SimpleLightbox('.gallery a', {\n      captionsData: 'alt',\n      captionDelay: 250,\n    });\n  } else {\n    lightbox.refresh();\n  }\n}","import { fetchImages } from './js/pixabay-api.js';\nimport { renderGallery } from './js/render-functions.js';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const form = document.querySelector('.search-form');\n  const inputField = document.querySelector(\"input[name='searchQuery']\");\n  const loader = document.querySelector('.loader');\n  const gallery = document.querySelector('.gallery');\n  const loadMoreBtn = document.querySelector('.load-btn');\n\n  let currentQuery = '';\n  let currentPage = 1;\n  let totalHits = 0;\n\n  loadMoreBtn.style.display = 'none';\n\n  form.addEventListener('submit', async event => {\n    event.preventDefault();\n    const query = inputField.value.trim();\n\n    if (!query) {\n      showError('Please enter a search term!');\n      return;\n    }\n\n    resetGallery();\n    currentQuery = query;\n    currentPage = 1;\n\n    await loadImages();\n  });\n\n  loadMoreBtn.addEventListener('click', async () => {\n    currentPage += 1;\n    await loadImages();\n  });\n\n  async function loadImages() {\n    try {\n      showLoader(true);\n\n      const data = await fetchImages(currentQuery, currentPage);\n      showLoader(false);\n\n      if (data.hits.length === 0) {\n        showError('Sorry, there are no images matching your search query. Please try again!');\n        return;\n      }\n\n      renderGallery(data.hits, currentPage > 1);\n      totalHits = data.totalHits;\n\n      if (currentPage * 40 < totalHits) {\n        loadMoreBtn.style.display = 'block';\n      } else {\n        loadMoreBtn.style.display = 'none';\n        showInfo(\"We're sorry, but you've reached the end of search results.\");\n      }\n\n      setTimeout(smoothScrollAfterLoad, 500);\n    } catch (error) {\n      showLoader(false);\n      showError('Something went wrong. Please try again!');\n      console.error('Fetch error:', error);\n    }\n  }\n\n  function resetGallery() {\n    gallery.innerHTML = '';\n    totalHits = 0;\n    currentPage = 1;\n    loadMoreBtn.style.display = 'none';\n  }\n\n  function showLoader(visible) {\n    loader.style.display = visible ? 'block' : 'none';\n  }\n\n  function showError(message) {\n    iziToast.error({ message, position: 'topRight' });\n  }\n\n  function showInfo(message) {\n    iziToast.info({ message, position: 'topRight' });\n  }\n\n  function smoothScrollAfterLoad() {\n    const galleryItems = document.querySelectorAll('.gallery-item');\n    if (galleryItems.length > 0) {\n      const cardHeight = galleryItems[0].getBoundingClientRect().height;\n      window.scrollBy({\n        top: cardHeight * 2,\n        left: 0,\n        behavior: 'smooth',\n      });\n    }\n  }\n});"],"names":["API_KEY","BASE_URL","fetchImages","query","page","axios","error","lightbox","renderGallery","images","append","gallery","markup","image","SimpleLightbox","form","inputField","loader","loadMoreBtn","currentQuery","currentPage","totalHits","event","showError","resetGallery","loadImages","showLoader","data","showInfo","smoothScrollAfterLoad","visible","message","iziToast","galleryItems","cardHeight"],"mappings":"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"}